const FOX_BODY = "M 196.92,97.51 C 202.16,88.01 201.88,77.06 201.47,66.13 C 200.58,47.38 192.84,19.24 183.43,13.17 C 179.22,10.41 172.78,11.45 168.73,14.51 C 155.88,23.29 147.08,35.42 139.42,46.17 C 130.75,45.48 124.11,46.25 116.13,47.22 C 103.96,33.44 90.61,16.63 74.62,16.14 C 64.15,15.77 62.18,36.18 63.58,54.69 C 64.27,63.86 65.62,68.93 67.01,77.54 L 63.38,87.17 C 51.13,87.17 44.98,96.78 42.63,105.31 C 39.82,105.31 38.91,106.91 38.66,111.67 C 38.58,113.33 41.12,114.45 42.71,115.71 C 43.95,122.83 47.13,128.31 52.17,131.1 C 48.62,133.21 44.74,135.06 40.45,136.92 C 35.48,139.25 35.16,145.07 36.68,152.73 C 38.66,162.72 42.38,166.19 49.96,169.21 C 54.76,178.71 67.46,183.22 86.99,183.79 H 92.77 C 98.18,185.73 97.77,194.98 95.22,202.32 C 93.17,208.01 91.37,210.91 88.11,215.32 C 92.28,215.16 93.92,215.32 97.53,215.89 C 102.81,206.82 105.11,195.31 103.42,185.33 C 115.13,186.46 122.67,191.68 127.92,200.05 C 128.21,185.01 117.11,177.07 100.92,176.75 C 92.16,176.75 87.11,177.92 77.06,177.43 C 68.74,177.03 60.17,174.31 58.02,169.37 C 77.06,172.98 96.89,168.8 115.77,157.24 C 118.16,155.73 120.83,156.87 124.15,160.91 C 126.59,154.04 121.22,147.61 112.82,149.12 C 110.39,149.61 111.13,151.12 112.82,151.94 C 113.78,152.43 114.72,152.91 115.41,153.56 C 101.41,162.72 89.16,165.74 76.12,165.74 C 66.39,165.74 58.57,163.21 54.92,156.63 C 62.18,154.44 65.42,149.16 65.42,145.23 C 65.42,140.21 61.01,138.56 53.91,136.11 C 67.62,129.08 82.67,120.17 82.67,110.26 C 82.67,108.74 83.91,108.17 86.22,107.77 C 88.92,107.36 90.77,108.62 93.31,109.61 C 93.31,122.14 103.61,135.83 117.43,135.83 C 130.71,135.83 138.01,125.25 139.67,113.28 C 148.59,112.43 159.81,112.11 175.07,110.51 C 180.81,110.02 183.88,113.2 186.03,117.26 C 188.11,120.72 189.65,118.28 189.65,115.63 C 189.65,110.63 181.91,106.59 176.09,106.59 C 166.36,106.59 154.53,107.12 140.08,106.02 C 136.75,94.68 127.11,86.89 116.13,86.89 C 104.71,86.89 96.49,94.63 93.72,104.66 C 90.08,103.63 87.31,103.18 83.24,104.28 C 81.09,97.91 77.86,93.91 71.32,90.01 C 83.32,66.21 103.17,53.26 137.62,52.61 L 139.42,65.52 C 147.2,45.11 155.68,32.16 172.74,19.56 C 177.42,16.42 180.93,17.07 184.08,22.01 C 196.92,42.84 198.25,68.93 184.81,95.32 C 194.71,103.67 201.71,117.22 204.75,133.95 C 198.61,128.51 191.43,126.06 183.07,124.8 C 190.53,131.51 196.44,137.81 196.92,145.76 C 187.97,139.86 180.73,137.85 169.83,137.08 C 179.93,146.16 187.89,154.94 187.89,168.4 C 177.83,160.5 169.06,157.64 153.88,157.64 C 164.98,169.81 170.88,179.56 170.03,201.21 C 166.71,196.13 165.02,193.29 160.41,191.08 C 161.26,200.21 160.41,207.61 157.75,215.52 C 162.21,213.94 164.06,213.94 170.52,214.1 C 178.43,214.26 181.58,210.06 186.36,205.31 C 192.49,199.41 198.11,197.64 210.72,191.64 C 211.32,179.48 208.26,168.16 204.31,157.52 L 217.15,164.38 C 217.15,146.08 210.07,118.2 196.92,97.51 Z M 48.13,109.03 C 48.13,99.76 54.68,93.83 62.26,93.83 H 65.18 L 49.11,116.23 C 48.41,114.17 48.13,111.71 48.13,109.03 Z M 51.42,122.62 L 49.68,119.69 L 69.22,95.08 L 72.41,97.23 L 51.42,122.62 Z M 43.11,141.51 C 44.07,140.21 47.61,139.47 50.37,139.47 C 53.42,139.47 55.81,140.13 55.81,141.23 C 55.81,142.32 53.38,143.21 50.33,143.21 C 47.29,143.21 43.11,142.56 43.11,141.51 Z M 43.52,152.61 C 48.01,153.18 49.72,154.78 50.53,160.91 C 46.48,160.01 43.91,157.16 43.52,152.61 Z M 117.43,92.61 H 120.51 L 100.48,118.12 L 99.83,118.92 C 98.86,116.47 98.38,114.09 98.38,111.31 C 98.38,100.21 106.49,92.61 117.43,92.61 Z M 126.37,96.74 L 104.63,123.7 L 102.18,124.11 L 100.84,121.73 L 125.17,95.08 L 126.37,96.74 Z";

const FOX_EAR = "M 176.01,31.63 C 173.58,30.04 170.03,31.26 167.6,34.91 C 158.12,47.82 155.68,54.25 155.68,67.16 V 72.71 C 160.17,67.91 163.72,64.97 169.5,62.51 C 166.32,70.65 167.64,77.54 172.13,84.41 C 180.89,77.54 183.92,67.16 183.92,58.53 C 183.92,49.83 179.87,34.42 176.01,31.63 Z";

const FOX_VARIANTS = [
	{ bg: "#FDE8F0", from: "#E8639A", to: "#C2185B" },
	{ bg: "#DBEAFE", from: "#3B82F6", to: "#1D4ED8" },
	{ bg: "#D1FAE5", from: "#10B981", to: "#047857" },
	{ bg: "#EDE9FE", from: "#8B5CF6", to: "#6D28D9" },
	{ bg: "#FFF7ED", from: "#F2901B", to: "#E6502B" },
	{ bg: "#FEE2E2", from: "#EF4444", to: "#B91C1C" },
	{ bg: "#CCFBF1", from: "#14B8A6", to: "#0D9488" },
	{ bg: "#FEF9C3", from: "#EAB308", to: "#CA8A04" },
	{ bg: "#E0E7FF", from: "#6366F1", to: "#4338CA" },
	{ bg: "#FFE4E6", from: "#F43F5E", to: "#BE123C" },
];

function hashString(str: string): number {
	let hash = 0;
	for (let i = 0; i < str.length; i++) {
		hash = (hash << 5) - hash + str.charCodeAt(i);
		hash |= 0;
	}
	return Math.abs(hash);
}

export function FoxAvatar({
	seed,
	variant,
	className,
}: {
	seed?: string;
	variant?: number;
	className?: string;
}) {
	const idx =
		variant !== undefined
			? variant % FOX_VARIANTS.length
			: seed
				? hashString(seed) % FOX_VARIANTS.length
				: 4;
	const v = FOX_VARIANTS[idx];
	const gradId = `fox-grad-${idx}`;
	const earGradId = `fox-ear-grad-${idx}`;

	return (
		<svg
			xmlns="http://www.w3.org/2000/svg"
			viewBox="0 0 256 256"
			fill="none"
			className={className}
		>
			<circle cx="128" cy="128" r="128" fill={v.bg} />
			<g transform="translate(10, 20) scale(0.92)">
				<path d={FOX_BODY} fill={`url(#${gradId})`} />
				<path d={FOX_EAR} fill={`url(#${earGradId})`} />
			</g>
			<defs>
				<linearGradient id={gradId} x1="128" y1="13" x2="128" y2="216" gradientUnits="userSpaceOnUse">
					<stop stopColor={v.from} />
					<stop offset="1" stopColor={v.to} />
				</linearGradient>
				<linearGradient id={earGradId} x1="170" y1="31" x2="170" y2="84" gradientUnits="userSpaceOnUse">
					<stop stopColor={v.from} />
					<stop offset="1" stopColor={v.to} />
				</linearGradient>
			</defs>
		</svg>
	);
}

export const FOX_VARIANT_COUNT = FOX_VARIANTS.length;
